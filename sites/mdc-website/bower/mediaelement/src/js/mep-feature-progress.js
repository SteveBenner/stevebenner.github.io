!function(e){e.extend(MediaElementPlayer.prototype,{buildprogress:function(t,n,a,i){e('<div class="mejs-time-rail"><span class="mejs-time-total"><span class="mejs-time-buffering"></span><span class="mejs-time-loaded"></span><span class="mejs-time-current"></span><span class="mejs-time-handle"></span><span class="mejs-time-float"><span class="mejs-time-float-current">00:00</span><span class="mejs-time-float-corner"></span></span></span></div>').appendTo(n),n.find(".mejs-time-buffering").hide();var s=this,d=n.find(".mejs-time-total"),o=n.find(".mejs-time-loaded"),r=n.find(".mejs-time-current"),l=n.find(".mejs-time-handle"),u=n.find(".mejs-time-float"),m=n.find(".mejs-time-float-current"),f=function(e){var t=e.pageX,n=d.offset(),a=d.outerWidth(!0),s=0,o=0,r=0;i.duration&&(t<n.left?t=n.left:t>a+n.left&&(t=a+n.left),r=t-n.left,s=r/a,o=.02>=s?0:s*i.duration,c&&o!==i.currentTime&&i.setCurrentTime(o),mejs.MediaFeatures.hasTouch||(u.css("left",r),m.html(mejs.Utility.secondsToTimeCode(o)),u.show()))},c=!1,h=!1;d.bind("mousedown",function(e){return 1===e.which?(c=!0,f(e),s.globalBind("mousemove.dur",function(e){f(e)}),s.globalBind("mouseup.dur",function(){c=!1,u.hide(),s.globalUnbind(".dur")}),!1):void 0}).bind("mouseenter",function(){h=!0,s.globalBind("mousemove.dur",function(e){f(e)}),mejs.MediaFeatures.hasTouch||u.show()}).bind("mouseleave",function(){h=!1,c||(s.globalUnbind(".dur"),u.hide())}),i.addEventListener("progress",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),i.addEventListener("timeupdate",function(e){t.setProgressRail(e),t.setCurrentRail(e)},!1),s.loaded=o,s.total=d,s.current=r,s.handle=l},setProgressRail:function(e){var t=this,n=void 0!=e?e.target:t.media,a=null;n&&n.buffered&&n.buffered.length>0&&n.buffered.end&&n.duration?a=n.buffered.end(0)/n.duration:n&&void 0!=n.bytesTotal&&n.bytesTotal>0&&void 0!=n.bufferedBytes?a=n.bufferedBytes/n.bytesTotal:e&&e.lengthComputable&&0!=e.total&&(a=e.loaded/e.total),null!==a&&(a=Math.min(1,Math.max(0,a)),t.loaded&&t.total&&t.loaded.width(t.total.width()*a))},setCurrentRail:function(){var e=this;if(void 0!=e.media.currentTime&&e.media.duration&&e.total&&e.handle){var t=Math.round(e.total.width()*e.media.currentTime/e.media.duration),n=t-Math.round(e.handle.outerWidth(!0)/2);e.current.width(t),e.handle.css("left",n)}}})}(mejs.$);