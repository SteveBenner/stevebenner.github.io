!function(e){e.extend(mejs.MepDefaults,{usePluginFullScreen:!0,newWindowCallback:function(){return""},fullscreenText:mejs.i18n.t("Fullscreen")}),e.extend(MediaElementPlayer.prototype,{isFullScreen:!1,isNativeFullScreen:!1,isInIframe:!1,buildfullscreen:function(t,i,n,l){if(t.isVideo){if(t.isInIframe=window.location!=window.parent.location,mejs.MediaFeatures.hasTrueNativeFullScreen){var s=function(){t.isFullScreen&&(mejs.MediaFeatures.isFullScreen()?(t.isNativeFullScreen=!0,t.setControlsSize()):(t.isNativeFullScreen=!1,t.exitFullScreen()))};mejs.MediaFeatures.hasMozNativeFullScreen?t.globalBind(mejs.MediaFeatures.fullScreenEventName,s):t.container.bind(mejs.MediaFeatures.fullScreenEventName,s)}var o=this,r=(t.container,e('<div class="mejs-button mejs-fullscreen-button"><button type="button" aria-controls="'+o.id+'" title="'+o.options.fullscreenText+'" aria-label="'+o.options.fullscreenText+'"></button></div>').appendTo(i));if("native"===o.media.pluginType||!o.options.usePluginFullScreen&&!mejs.MediaFeatures.isFirefox)r.click(function(){var e=mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||t.isFullScreen;e?t.exitFullScreen():t.enterFullScreen()});else{var a=null,u=function(){var e,t=document.createElement("x"),i=document.documentElement,n=window.getComputedStyle;return"pointerEvents"in t.style?(t.style.pointerEvents="auto",t.style.pointerEvents="x",i.appendChild(t),e=n&&"auto"===n(t,"").pointerEvents,i.removeChild(t),!!e):!1}();if(u&&!mejs.MediaFeatures.isOpera){var c,d,m=!1,f=function(){if(m){for(var e in h)h[e].hide();r.css("pointer-events",""),o.controls.css("pointer-events",""),o.media.removeEventListener("click",o.clickToPlayPauseCallback),m=!1}},h={},v=["top","left","right","bottom"],F=function(){var e=r.offset().left-o.container.offset().left,t=r.offset().top-o.container.offset().top,i=r.outerWidth(!0),n=r.outerHeight(!0),l=o.container.width(),s=o.container.height();for(c in h)h[c].css({position:"absolute",top:0,left:0});h.top.width(l).height(t),h.left.width(e).height(n).css({top:t}),h.right.width(l-e-i).height(n).css({top:t,left:e+i}),h.bottom.width(l).height(s-n-t).css({top:t+n})};for(o.globalBind("resize",function(){F()}),c=0,d=v.length;d>c;c++)h[v[c]]=e('<div class="mejs-fullscreen-hover" />').appendTo(o.container).mouseover(f).hide();r.on("mouseover",function(){if(!o.isFullScreen){var e=r.offset(),i=t.container.offset();l.positionFullscreenButton(e.left-i.left,e.top-i.top,!1),r.css("pointer-events","none"),o.controls.css("pointer-events","none"),o.media.addEventListener("click",o.clickToPlayPauseCallback);for(c in h)h[c].show();F(),m=!0}}),l.addEventListener("fullscreenchange",function(){o.isFullScreen=!o.isFullScreen,o.isFullScreen?o.media.removeEventListener("click",o.clickToPlayPauseCallback):o.media.addEventListener("click",o.clickToPlayPauseCallback),f()}),o.globalBind("mousemove",function(e){if(m){var t=r.offset();(e.pageY<t.top||e.pageY>t.top+r.outerHeight(!0)||e.pageX<t.left||e.pageX>t.left+r.outerWidth(!0))&&(r.css("pointer-events",""),o.controls.css("pointer-events",""),m=!1)}})}else r.on("mouseover",function(){null!==a&&(clearTimeout(a),delete a);var e=r.offset(),i=t.container.offset();l.positionFullscreenButton(e.left-i.left,e.top-i.top,!0)}).on("mouseout",function(){null!==a&&(clearTimeout(a),delete a),a=setTimeout(function(){l.hideFullscreenButton()},1500)})}t.fullscreenBtn=r,o.globalBind("keydown",function(e){(mejs.MediaFeatures.hasTrueNativeFullScreen&&mejs.MediaFeatures.isFullScreen()||o.isFullScreen)&&27==e.keyCode&&t.exitFullScreen()})}},cleanfullscreen:function(e){e.exitFullScreen()},containerSizeTimeout:null,enterFullScreen:function(){var t=this;if("native"===t.media.pluginType||!mejs.MediaFeatures.isFirefox&&!t.options.usePluginFullScreen){if(e(document.documentElement).addClass("mejs-fullscreen"),normalHeight=t.container.height(),normalWidth=t.container.width(),"native"===t.media.pluginType)if(mejs.MediaFeatures.hasTrueNativeFullScreen)mejs.MediaFeatures.requestFullScreen(t.container[0]),t.isInIframe&&setTimeout(function n(){t.isNativeFullScreen&&(e(window).width()!==screen.width?t.exitFullScreen():setTimeout(n,500))},500);else if(mejs.MediaFeatures.hasSemiNativeFullScreen)return t.media.webkitEnterFullscreen(),void 0;if(t.isInIframe){var i=t.options.newWindowCallback(this);if(""!==i){if(!mejs.MediaFeatures.hasTrueNativeFullScreen)return t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"),void 0;setTimeout(function(){t.isNativeFullScreen||(t.pause(),window.open(i,t.id,"top=0,left=0,width="+screen.availWidth+",height="+screen.availHeight+",resizable=yes,scrollbars=no,status=no,toolbar=no"))},250)}}t.container.addClass("mejs-container-fullscreen").width("100%").height("100%"),t.containerSizeTimeout=setTimeout(function(){t.container.css({width:"100%",height:"100%"}),t.setControlsSize()},500),"native"===t.media.pluginType?t.$media.width("100%").height("100%"):(t.container.find(".mejs-shim").width("100%").height("100%"),t.media.setVideoSize(e(window).width(),e(window).height())),t.layers.children("div").width("100%").height("100%"),t.fullscreenBtn&&t.fullscreenBtn.removeClass("mejs-fullscreen").addClass("mejs-unfullscreen"),t.setControlsSize(),t.isFullScreen=!0}},exitFullScreen:function(){var t=this;return clearTimeout(t.containerSizeTimeout),"native"!==t.media.pluginType&&mejs.MediaFeatures.isFirefox?(t.media.setFullscreen(!1),void 0):(mejs.MediaFeatures.hasTrueNativeFullScreen&&(mejs.MediaFeatures.isFullScreen()||t.isFullScreen)&&mejs.MediaFeatures.cancelFullScreen(),e(document.documentElement).removeClass("mejs-fullscreen"),t.container.removeClass("mejs-container-fullscreen").width(normalWidth).height(normalHeight),"native"===t.media.pluginType?t.$media.width(normalWidth).height(normalHeight):(t.container.find(".mejs-shim").width(normalWidth).height(normalHeight),t.media.setVideoSize(normalWidth,normalHeight)),t.layers.children("div").width(normalWidth).height(normalHeight),t.fullscreenBtn.removeClass("mejs-unfullscreen").addClass("mejs-fullscreen"),t.setControlsSize(),t.isFullScreen=!1,void 0)}})}(mejs.$);