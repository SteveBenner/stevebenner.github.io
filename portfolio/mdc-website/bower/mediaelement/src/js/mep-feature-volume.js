!function(e){e.extend(mejs.MepDefaults,{muteText:mejs.i18n.t("Mute Toggle"),hideVolumeOnTouchDevices:!0,audioVolume:"horizontal",videoVolume:"vertical"}),e.extend(MediaElementPlayer.prototype,{buildvolume:function(t,o,i,s){if(!mejs.MediaFeatures.hasTouch||!this.options.hideVolumeOnTouchDevices){var n=this,l=n.isVideo?n.options.videoVolume:n.options.audioVolume,u="horizontal"==l?e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+n.id+'" title="'+n.options.muteText+'" aria-label="'+n.options.muteText+'"></button></div><div class="mejs-horizontal-volume-slider"><div class="mejs-horizontal-volume-total"></div><div class="mejs-horizontal-volume-current"></div><div class="mejs-horizontal-volume-handle"></div></div>').appendTo(o):e('<div class="mejs-button mejs-volume-button mejs-mute"><button type="button" aria-controls="'+n.id+'" title="'+n.options.muteText+'" aria-label="'+n.options.muteText+'"></button><div class="mejs-volume-slider"><div class="mejs-volume-total"></div><div class="mejs-volume-current"></div><div class="mejs-volume-handle"></div></div></div>').appendTo(o),a=n.container.find(".mejs-volume-slider, .mejs-horizontal-volume-slider"),m=n.container.find(".mejs-volume-total, .mejs-horizontal-volume-total"),d=n.container.find(".mejs-volume-current, .mejs-horizontal-volume-current"),v=n.container.find(".mejs-volume-handle, .mejs-horizontal-volume-handle"),r=function(e,t){if(!a.is(":visible")&&"undefined"==typeof t)return a.show(),r(e,!0),a.hide(),void 0;if(e=Math.max(0,e),e=Math.min(e,1),0==e?u.removeClass("mejs-mute").addClass("mejs-unmute"):u.removeClass("mejs-unmute").addClass("mejs-mute"),"vertical"==l){var o=m.height(),i=m.position(),s=o-o*e;v.css("top",Math.round(i.top+s-v.height()/2)),d.height(o-s),d.css("top",i.top+s)}else{var n=m.width(),i=m.position(),c=n*e;v.css("left",Math.round(i.left+c-v.width()/2)),d.width(Math.round(c))}},c=function(e){var t=null,o=m.offset();if("vertical"==l){var i=m.height(),n=(parseInt(m.css("top").replace(/px/,""),10),e.pageY-o.top);if(t=(i-n)/i,0==o.top||0==o.left)return}else{var u=m.width(),a=e.pageX-o.left;t=a/u}t=Math.max(0,t),t=Math.min(t,1),r(t),0==t?s.setMuted(!0):s.setMuted(!1),s.setVolume(t)},h=!1,p=!1;u.hover(function(){a.show(),p=!0},function(){p=!1,h||"vertical"!=l||a.hide()}),a.bind("mouseover",function(){p=!0}).bind("mousedown",function(e){return c(e),n.globalBind("mousemove.vol",function(e){c(e)}),n.globalBind("mouseup.vol",function(){h=!1,n.globalUnbind(".vol"),p||"vertical"!=l||a.hide()}),h=!0,!1}),u.find("button").click(function(){s.setMuted(!s.muted)}),s.addEventListener("volumechange",function(){h||(s.muted?(r(0),u.removeClass("mejs-mute").addClass("mejs-unmute")):(r(s.volume),u.removeClass("mejs-unmute").addClass("mejs-mute")))},!1),n.container.is(":visible")&&(r(t.options.startVolume),0===t.options.startVolume&&s.setMuted(!0),"native"===s.pluginType&&s.setVolume(t.options.startVolume))}}})}(mejs.$);